<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patitas Felices</title>
    <link rel="stylesheet" href="../styles/login.css" />
    <link rel="stylesheet" href="../styles/estilos.css" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="/img/favicon_patitas.png">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <!-- CABECERA  -->
    <header class="header" id="header">
        <!-- ACÁ SE CARGA EL HEADER -->
    </header>

    <section>
        <!-- inicio de sesion -->
        <div class="contenedor">
            <div class="login_formulario">
                <form id="loginForm">
                    <h2>Iniciar Sesión</h2>
                    <div class="input-contenedor">
                        <input id="emailOrId" type="text">
                        <label>Correo o CI</label>
                    </div>

                    <div class="input-contenedor">
                        <input id="password" type="password">
                        <label>Contraseña</label>
                    </div>

                    <div class="recuperar">
                        <label for="#">
                            <input type="checkbox" name="r" id="rememberCheckbox"> Recordar!
                            <a href="#">¿Olvidaste tu contraseña?</a>
                        </label>
                    </div>
                </form>
                <button class="ingresar" onclick="validateForm()">Acceder</button>

                <div class="crear_cuenta">
                    <p>¿No tienes una cuenta? <a href="/pages/regis_usuario.html">Registrate!</a></p>
                </div>
            </div>
        </div>

    </section>

    <!-- FOOTER -->
    <footer class="pie">
        <!-- ACÁ SE CARGA EL FOOTER -->
    </footer>

    <!-- Script para validar el formulario -->
    <script>
        function validateForm() {
            const emailOrId = document.getElementById('emailOrId').value;
            const password = document.getElementById('password').value;

            // Email validation using regular expression
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (emailOrId == '') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Email esta vacio!',
                });
                return false;
            }

            if (!emailRegex.test(emailOrId)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Por favor, introduce un email válido',
                });
                return false;
            }


            if (password == '') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Contraseña invalida!',
                });
                return false;
            }

            if (emailOrId == '' && password == '') {
                Swal.fire(
                    'Bienvenido!',
                    'Acceso correcto!',
                    'success'
                )
                return false;
            }

            document.getElementById('loginForm').submit();
        }
    </script>

    <!-- Los Script´s -->
    <script src="../js/header_footer.js"></script>
    <script type="module" src="../js/cards.js"></script>
    <script type="module" src="../js/index.js"></script>

</body>

</html>